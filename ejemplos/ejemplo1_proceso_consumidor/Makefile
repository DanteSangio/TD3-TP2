Author= "Andres Demski"


##########################
# Compiler and arguments #
##########################

CC = gcc
C_PARAM = -c -g -Wall
LD= -lm `pkg-config --cflags opencv` `pkg-config --libs opencv` -lpthread

##########################
#   Src, Obj and Exec    #
##########################

SRC= $(wildcard *.c)
OBJ= $(SRC:.c=.o)
HEAD= $(wildcard *.h)
Exec= consumidor


all: linker
linker: compiler
	@echo "\n===================================================================================="
	@echo "  Linking" $(OBJ)    
	@echo "===================================================================================="
	$(CC) -o $(Exec) $(OBJ) $(LD)
	@echo "\n===================================================================================="
	@echo "  Finish: OK\n\n"

compiler:$(OBJ)
%.o: %.c
	@echo "\n===================================================================================="
	@echo "  Compiling the file: " $< 
	@echo "===================================================================================="
	$(CC) $(C_PARAM) $< -o $@ 

clean:
	@echo "\n===================================================================================="
	@echo "  Cleaning: " $(OBJ) $(Exec) 
	@echo "===================================================================================="
	rm $(OBJ) $(Exec)
	@echo "\n"

help:
	@echo "\n===================================================================================="
	@echo "  Help: "
	@echo "    all: Compile and Linker"
	@echo "    file.o: Compile the file.c"
	@echo "    clean: remove generated files"
	@echo "====================================================================================\n"